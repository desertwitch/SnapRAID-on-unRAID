Menu="Buttons:197"
Link="nav-user"
---
<?
/* Copyright Derek Macias (parts of code from NUT package)
 * Copyright macester (parts of code from NUT package)
 * Copyright gfjardim (parts of code from NUT package)
 * Copyright SimonF (parts of code from NUT package)
 * Copyright Dan Landon (parts of code from Web GUI)
 * Copyright Bergware International (parts of code from Web GUI)
 * Copyright Lime Technology (any and all other parts of Unraid)
 *
 * Copyright desertwitch
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License 2
 * as published by the Free Software Foundation.
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 */
require_once '/usr/local/emhttp/plugins/dwsnap/include/dwsnap_config.php';
?>
<?if($dwsnap_footer == "enable"):?>
<?$snap_footer_html = dwsnap_getFooterHTML() ?? "";?>

<style type="text/css">
#snap_footer {
    float: right;
    margin-right: 24px;
    font-size: 1.1rem;
    cursor: pointer;
}
#snap_footer i {
    margin-left: 5px;
}
</style>

<script type="text/javascript">
function getSnapFooter() {
    $.get('/plugins/dwsnap/include/dwsnap_status.php',function(data) {
        if (data) { 
            if(data === "RUNNING:YES") {
                $('#snap_footer').show();
                $('#snap_footer').html('<span class="snaptip" title="Array Operation in Progress">SnapRAID<i class="fa fa-cog fa-spin"></i></span>');
                $('.snaptip').tooltipster();
            } else if (data === "RUNNING:NO") {
                var snapFooter = "<?=$snap_footer_html?>";
                if(snapFooter) {
                    $('#snap_footer').show();	
                    $('#snap_footer').html(snapFooter);
                    $('.snaptip').tooltipster();
                } else {
                    $('#snap_footer').html("");
                    $('#snap_footer').hide();
                }
            }
	    }
    });
    clearTimeout(timers.getSnapFooter);
    timers.getSnapFooter = setTimeout(getSnapFooter, 3000);
    $('#snap_footer').click(function() {
        location = '/Settings/dwsnapOps';
    });
}
$(function()
{
    var snap_footer = $("<span id='snap_footer'></span>").insertAfter("div#footer > span#copyright");
    getSnapFooter();
});
</script>
<?endif;?>
