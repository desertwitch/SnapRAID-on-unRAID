Menu="dwsnapOps:1"
Title="SnapRAID Settings"
Tag="cogs"
Markdown="false"
---
<? require_once '/usr/local/emhttp/plugins/dwsnap/include/dwsnap_config.php'; ?>

<span style="float:right;margin-right:10px"><a href="https://www.snapraid.it/manual" target="_blank" title="SnapRAID User Manual"><i class="fa fa-file-text-o"></i> <u>User Manual</u></a> / <a href="https://www.snapraid.it/faq" target="_blank" title="SnapRAID FAQ"><i class="fa fa-question-circle-o"></i> <u>Frequently Asked Questions</u></a></span>

<div><strong>WARNING:</strong></div>
<div>SnapRAID is a non-supported backup utility for advanced users and can - depending on how YOU set it up - wreak havoc on your system.</div>
<div>Please make yourself familiar with the documentation before trying any unfamiliar SnapRAID commands - you are warned only once here.</div>

<br>

<form markdown="0" id="dwsnap-settings" name="dwsnap_settings" method="POST" action="/update.php" target="progressFrame">
<input type="hidden" name="#file" value="dwsnap/dwsnap.cfg">
<input type="hidden" id="command2" name="#command" value="">
<dl>
    <dt>SnapRAID Backend:</dt>
    <dd>
	    <strong><?= isset($snapraid_backend) && $snapraid_backend ? $snapraid_backend : "n/a" ?></strong>
    </dd>
</dl>

<dl>
    <dt>SnapRAID I/O Process Priority:</dt>
    <dd>
        <select class="snaprun" id="PRIO" name="PRIO" size="1">
            <?=mk_option($dwsnap_prio, "disable", "System Default");?>
            <?=mk_option($dwsnap_prio, "idle", "Idle");?>
            <?=mk_option($dwsnap_prio, "besteffort", "Best Effort");?>
            <?=mk_option($dwsnap_prio, "realtime", "Real Time");?>
        </select>
    </dd>
</dl>

<blockquote class="inline_help">
</blockquote>

<dl>
    <dt>SnapRAID Maintenance - Cron Schedule:</dt>
    <dd>
        <select class="snaprun" id="CRON" name="CRON" size="1">
            <?=mk_option($dwsnap_cron, "disable", "Never");?>
            <?=mk_option($dwsnap_cron, "daily", "Daily");?>
            <?=mk_option($dwsnap_cron, "weekly", "Weekly");?>
            <?=mk_option($dwsnap_cron, "monthly", "Monthly");?>
        </select>
    </dd>
</dl>

<blockquote class="inline_help">
</blockquote>

<dl>
    <dt>SnapRAID Maintenance - Cron Notifications:</dt>
    <dd>
        <select class="snaprun" id="NOTIFY" name="NOTIFY" size="1">
            <?=mk_option($dwsnap_notify, "disable", "No");?>
            <?=mk_option($dwsnap_notify, "enable", "Yes");?>
        </select>
    </dd>
</dl>

<blockquote class="inline_help">
</blockquote>

<dl>
    <dt>SnapRAID Maintenance - Touch (Step 1):</dt>
    <dd>
        <select class="snaprun" id="TOUCH" name="TOUCH" size="1">
            <?=mk_option($dwsnap_touch, "disable", "No");?>
            <?=mk_option($dwsnap_touch, "enable", "Yes");?>
        </select>
    </dd>
</dl>

<blockquote class="inline_help">
</blockquote>

<dl>
    <dt>SnapRAID Maintenance - Diff / Check Thresholds (Step 2):</dt>
    <dd>
        <select class="snaprun" id="DIFF" name="DIFF" size="1">
            <?=mk_option($dwsnap_diff, "disable", "No");?>
            <?=mk_option($dwsnap_diff, "enable", "Yes");?>
        </select>
    </dd>
</dl>

<blockquote class="inline_help">
</blockquote>

<dl>
    <dt>SnapRAID Maintenance - Sync (Step 3):</dt>
    <dd>
        <select class="snaprun" id="SYNC" name="SYNC" size="1">
            <?=mk_option($dwsnap_sync, "disable", "No");?>
            <?=mk_option($dwsnap_sync, "enable", "Yes");?>
        </select>
    </dd>
</dl>

<blockquote class="inline_help">
</blockquote>

<dl>
    <dt>SnapRAID Maintenance - Scrub (Step 4):</dt>
    <dd>
        <select class="snaprun" id="SCRUB" name="SCRUB" size="1">
            <?=mk_option($dwsnap_scrub, "disable", "No");?>
            <?=mk_option($dwsnap_scrub, "enable", "Yes");?>
        </select>
    </dd>
</dl>

<blockquote class="inline_help">
</blockquote>

<dl>
    <dt>SnapRAID Maintenance - Added File Threshold:</dt>
    <dd>
        <input id="ADDED" type="text" class="narrow snaprun" name="ADDED" maxlength="30" value="<?=$dwsnap_added?>">
    </dd>
</dl>

<blockquote class="inline_help">
</blockquote>

<dl>
    <dt>SnapRAID Maintenance - Deleted File Threshold:</dt>
    <dd>
        <input id="DELETED" type="text" class="narrow snaprun" name="DELETED" maxlength="30" value="<?=$dwsnap_deleted?>">
    </dd>
</dl>

<blockquote class="inline_help">
</blockquote>

<dl>
    <dt>SnapRAID Maintenance - Updated File Threshold:</dt>
    <dd>
        <input id="UPDATED" type="text" class="narrow snaprun" name="UPDATED" maxlength="30" value="<?=$dwsnap_updated?>">
    </dd>
</dl>

<blockquote class="inline_help">
</blockquote>

<dl>
    <dt>SnapRAID Maintenance - Moved File Threshold:</dt>
    <dd>
        <input id="MOVED" type="text" class="narrow snaprun" name="MOVED" maxlength="30" value="<?=$dwsnap_moved?>">
    </dd>
</dl>

<blockquote class="inline_help">
</blockquote>

<dl>
    <dt>SnapRAID Maintenance - Copied File Threshold:</dt>
    <dd>
        <input id="COPIED" type="text" class="narrow snaprun" name="COPIED" maxlength="30" value="<?=$dwsnap_copied?>">
    </dd>
</dl>

<blockquote class="inline_help">
</blockquote>

<dl>
    <dt>SnapRAID Maintenance - Restored File Threshold:</dt>
    <dd>
        <input id="RESTORED" type="text" class="narrow snaprun" name="RESTORED" maxlength="30" value="<?=$dwsnap_restored?>">
    </dd>
</dl>

<blockquote class="inline_help">
</blockquote>

<dl>
    <dt>SnapRAID Maintenance - Sync as Prehashed Sync:</dt>
    <dd>
        <select class="snaprun" id="PREHASH" name="PREHASH" size="1">
            <?=mk_option($dwsnap_prehash, "disable", "No");?>
            <?=mk_option($dwsnap_prehash, "enable", "Yes");?>
        </select>
    </dd>
</dl>

<blockquote class="inline_help">
</blockquote>

<dl>
    <dt>
        <input id="DEFAULT" type="submit" name="#default" value="Default">
        <input id="RESETCONF" class="snaprun" type="button" value="Reset Config">
    </dt>
    <dd>
        <input type="submit" id="btnApply" name="#apply" value="Apply">
        <input type="button" value="Done" onclick="done()">
    </dd>
</dl>

</form>

<script type="text/javascript">
$(function(){
    $('#btnApply').click(function(){
        $('#dwsnap-settings').submit();
    });
});
</script>
    
